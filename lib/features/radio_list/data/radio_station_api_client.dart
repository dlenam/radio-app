import 'dart:convert';

import 'package:http/http.dart';
import 'package:radio_app/features/radio_list/model/radio_station.dart';

const _radioAPIUrl = '65.109.136.86';

class RadioStationApiClient {
  final Client http;

  const RadioStationApiClient(this.http);

  Future<List<RadioStation>> getRadios(
      {required int offset, int limit = 10}) async {
    final url = Uri.https(_radioAPIUrl, '/json/stations/topclick', {
      'offset': offset.toString(),
      'limit': limit.toString(),
    });
    final response = await http.get(url);
    if (response.statusCode == 200) {
      return (jsonDecode(response.body) as List<dynamic>)
          .map((json) => RadioStation.fromApiJson(json))
          .toList();
    }
    throw Exception('Unknown http error');

    // final jsonRadioList = await mockedRadios();
    // return jsonRadioList.map((json) => RadioStation.fromApiJson(json)).toList();
  }
}

Future<List<Map<String, dynamic>>> mockedRadios() async => [
      {
        "changeuuid": "30ab2c13-6038-4895-85a6-1dec17ec8444",
        "stationuuid": "963ccae5-0601-11e8-ae97-52543be04c81",
        "serveruuid": null,
        "name": "Deutschlandfunk [MP3 128k]",
        "url": "http://st01.dlf.de/dlf/01/128/mp3/stream.mp3",
        "url_resolved":
            "http://f141.rndfnk.com/ard/dlf/01/mp3/128/stream.mp3?cid=01FBPWZ12X2XN8SDSMBZ7X0ZTT&sid=2bZ72NSccBUg0JbX12rMW5ynmQg&token=W9rcnjQIIEt13rozPwPPkMWeheSNQkOlXGE7-dkSi74&tvf=gGbHNP12rhdmMTQxLnJuZGZuay5jb20",
        "homepage": "http://www.deutschlandfunk.de/",
        "favicon":
            "http://www.deutschlandfunk.de/static/img/deutschlandfunk/icons/apple-touch-icon-128x128.png",
        "tags": "cultural news,culture,information,kultur,news",
        "country": "Germany",
        "countrycode": "DE",
        "iso_3166_2": null,
        "state": "",
        "language": "german",
        "languagecodes": "de",
        "votes": 36196,
        "lastchangetime": "2023-11-04 17:31:37",
        "lastchangetime_iso8601": "2023-11-04T17:31:37Z",
        "codec": "MP3",
        "bitrate": 128,
        "hls": 0,
        "lastcheckok": 1,
        "lastchecktime": "2024-01-28 02:55:47",
        "lastchecktime_iso8601": "2024-01-28T02:55:47Z",
        "lastcheckoktime": "2024-01-28 02:55:47",
        "lastcheckoktime_iso8601": "2024-01-28T02:55:47Z",
        "lastlocalchecktime": "2024-01-28 02:55:47",
        "lastlocalchecktime_iso8601": "2024-01-28T02:55:47Z",
        "clicktimestamp": "2024-01-29 01:32:19",
        "clicktimestamp_iso8601": "2024-01-29T01:32:19Z",
        "clickcount": 2381,
        "clicktrend": 9,
        "ssl_error": 0,
        "geo_lat": null,
        "geo_long": null,
        "has_extended_info": false
      },
      {
        "changeuuid": "ce8045ae-566c-4daf-b1b2-3dcbb0092fc2",
        "stationuuid": "9631dea0-0601-11e8-ae97-52543be04c81",
        "serveruuid": null,
        "name": "Radio Mirchi",
        "url": "http://peridot.streamguys.com:7150/Mirchi",
        "url_resolved": "http://peridot.streamguys.com:7150/Mirchi",
        "homepage": "http://www.radiomirchi.com/",
        "favicon": "",
        "tags": "",
        "country": "India",
        "countrycode": "IN",
        "iso_3166_2": null,
        "state": "",
        "language": "hindi",
        "languagecodes": "hi",
        "votes": 192518,
        "lastchangetime": "2023-11-04 15:18:59",
        "lastchangetime_iso8601": "2023-11-04T15:18:59Z",
        "codec": "AAC+",
        "bitrate": 24,
        "hls": 0,
        "lastcheckok": 1,
        "lastchecktime": "2024-01-29 00:55:31",
        "lastchecktime_iso8601": "2024-01-29T00:55:31Z",
        "lastcheckoktime": "2024-01-29 00:55:31",
        "lastcheckoktime_iso8601": "2024-01-29T00:55:31Z",
        "lastlocalchecktime": "2024-01-29 00:55:31",
        "lastlocalchecktime_iso8601": "2024-01-29T00:55:31Z",
        "clicktimestamp": "2024-01-29 01:35:05",
        "clicktimestamp_iso8601": "2024-01-29T01:35:05Z",
        "clickcount": 1849,
        "clicktrend": 100,
        "ssl_error": 0,
        "geo_lat": null,
        "geo_long": null,
        "has_extended_info": false
      },
      {
        "changeuuid": "bfb05ff4-9fc0-4648-adbb-2cd3b4623ec5",
        "stationuuid": "98adecf7-2683-4408-9be7-02d3f9098eb8",
        "serveruuid": null,
        "name": "BBC World Service",
        "url": "http://stream.live.vc.bbcmedia.co.uk/bbc_world_service",
        "url_resolved":
            "http://stream.live.vc.bbcmedia.co.uk/bbc_world_service",
        "homepage": "https://www.bbc.co.uk/programmes/w172xzjgf6lxp7y",
        "favicon": "http://cdn-profiles.tunein.com/s24948/images/logoq.jpg?t=1",
        "tags": "news,talk",
        "country": "The United Kingdom Of Great Britain And Northern Ireland",
        "countrycode": "GB",
        "iso_3166_2": null,
        "state": "",
        "language": "english",
        "languagecodes": "en",
        "votes": 87424,
        "lastchangetime": "2023-11-05 01:06:51",
        "lastchangetime_iso8601": "2023-11-05T01:06:51Z",
        "codec": "MP3",
        "bitrate": 56,
        "hls": 0,
        "lastcheckok": 1,
        "lastchecktime": "2024-01-28 14:40:23",
        "lastchecktime_iso8601": "2024-01-28T14:40:23Z",
        "lastcheckoktime": "2024-01-28 14:40:23",
        "lastcheckoktime_iso8601": "2024-01-28T14:40:23Z",
        "lastlocalchecktime": "2024-01-28 14:40:23",
        "lastlocalchecktime_iso8601": "2024-01-28T14:40:23Z",
        "clicktimestamp": "2024-01-29 01:28:05",
        "clicktimestamp_iso8601": "2024-01-29T01:28:05Z",
        "clickcount": 1846,
        "clicktrend": 77,
        "ssl_error": 0,
        "geo_lat": null,
        "geo_long": null,
        "has_extended_info": false
      },
      {
        "changeuuid": "8125d095-6397-4660-a5c4-ef0254f67e06",
        "stationuuid": "9617a958-0601-11e8-ae97-52543be04c81",
        "serveruuid": null,
        "name": "Radio Paradise (320k)",
        "url": "http://stream-uk1.radioparadise.com/aac-320",
        "url_resolved": "http://stream-uk1.radioparadise.com/aac-320",
        "homepage": "https://www.radioparadise.com/",
        "favicon": "https://www.radioparadise.com/favicon-32x32.png",
        "tags":
            "california,eclectic,free,internet,non-commercial,paradise,radio",
        "country": "The United States Of America",
        "countrycode": "US",
        "iso_3166_2": null,
        "state": "California",
        "language": "english",
        "languagecodes": "en",
        "votes": 174798,
        "lastchangetime": "2023-11-04 14:11:01",
        "lastchangetime_iso8601": "2023-11-04T14:11:01Z",
        "codec": "AAC",
        "bitrate": 320,
        "hls": 0,
        "lastcheckok": 1,
        "lastchecktime": "2024-01-28 23:54:39",
        "lastchecktime_iso8601": "2024-01-28T23:54:39Z",
        "lastcheckoktime": "2024-01-28 23:54:39",
        "lastcheckoktime_iso8601": "2024-01-28T23:54:39Z",
        "lastlocalchecktime": "2024-01-28 23:53:57",
        "lastlocalchecktime_iso8601": "2024-01-28T23:53:57Z",
        "clicktimestamp": "2024-01-29 01:36:21",
        "clicktimestamp_iso8601": "2024-01-29T01:36:21Z",
        "clickcount": 1635,
        "clicktrend": -37,
        "ssl_error": 0,
        "geo_lat": null,
        "geo_long": null,
        "has_extended_info": false
      },
      {
        "changeuuid": "2e914de2-7bf4-42ee-a009-1dea1e4a6ef5",
        "stationuuid": "5c6c092b-2b8b-4ac1-a8d0-090f87037fd9",
        "serveruuid": null,
        "name": "iraninternational",
        "url": "https://radio.iraninternational.app/iintl_c",
        "url_resolved":
            "http://n0f.radiojar.com/dfnrphnr5f0uv?rj-ttl=5&rj-tok=AAABjVKjPqkAN0sfKMRhzKKJVA",
        "homepage": "https://iranintl.com/",
        "favicon":
            "https://i1.sndcdn.com/avatars-YoWASwkjaL4sREAa-xEYNgg-t200x200.jpg",
        "tags": "iran,news,persian",
        "country": "Islamic Republic Of Iran",
        "countrycode": "IR",
        "iso_3166_2": null,
        "state": "",
        "language": "persian",
        "languagecodes": "fa",
        "votes": 23496,
        "lastchangetime": "2023-11-04 18:53:44",
        "lastchangetime_iso8601": "2023-11-04T18:53:44Z",
        "codec": "MP3",
        "bitrate": 0,
        "hls": 0,
        "lastcheckok": 1,
        "lastchecktime": "2024-01-29 00:28:42",
        "lastchecktime_iso8601": "2024-01-29T00:28:42Z",
        "lastcheckoktime": "2024-01-29 00:28:42",
        "lastcheckoktime_iso8601": "2024-01-29T00:28:42Z",
        "lastlocalchecktime": "2024-01-28 05:51:45",
        "lastlocalchecktime_iso8601": "2024-01-28T05:51:45Z",
        "clicktimestamp": "2024-01-29 01:19:43",
        "clicktimestamp_iso8601": "2024-01-29T01:19:43Z",
        "clickcount": 1466,
        "clicktrend": 39,
        "ssl_error": 0,
        "geo_lat": null,
        "geo_long": null,
        "has_extended_info": false
      },
      {
        "changeuuid": "fd714cf7-8be8-448e-993e-212c0023b1cf",
        "stationuuid": "962cc6df-0601-11e8-ae97-52543be04c81",
        "serveruuid": null,
        "name": "Dance Wave!",
        "url": "https://dancewave.online/dance.mp3",
        "url_resolved": "http://stream.dancewave.online:8080/dance.mp3",
        "homepage": "https://dancewave.online/",
        "favicon": "https://dancewave.online/dw_logo.png",
        "tags": "club dance electronic house trance",
        "country": "Hungary",
        "countrycode": "HU",
        "iso_3166_2": null,
        "state": "",
        "language": "english",
        "languagecodes": "en",
        "votes": 459479,
        "lastchangetime": "2023-12-19 17:35:04",
        "lastchangetime_iso8601": "2023-12-19T17:35:04Z",
        "codec": "MP3",
        "bitrate": 128,
        "hls": 0,
        "lastcheckok": 1,
        "lastchecktime": "2024-01-28 21:50:18",
        "lastchecktime_iso8601": "2024-01-28T21:50:18Z",
        "lastcheckoktime": "2024-01-28 21:50:18",
        "lastcheckoktime_iso8601": "2024-01-28T21:50:18Z",
        "lastlocalchecktime": "2024-01-28 12:02:53",
        "lastlocalchecktime_iso8601": "2024-01-28T12:02:53Z",
        "clicktimestamp": "2024-01-29 01:36:00",
        "clicktimestamp_iso8601": "2024-01-29T01:36:00Z",
        "clickcount": 1344,
        "clicktrend": 24,
        "ssl_error": 0,
        "geo_lat": null,
        "geo_long": null,
        "has_extended_info": true
      },
      {
        "changeuuid": "599cf698-a707-4d50-8383-e5f342fb9c08",
        "stationuuid": "78012206-1aa1-11e9-a80b-52543be04c81",
        "serveruuid": null,
        "name": "MANGORADIO",
        "url": "http://stream.mangoradio.de/",
        "url_resolved":
            "https://mangoradio.stream.laut.fm/mangoradio?t302=2024-01-28_11-15-49&uuid=656ddf0e-7916-4c87-9461-cbc564a216f9",
        "homepage": "https://mangoradio.de/",
        "favicon": "",
        "tags": "mango,mangoradio,mongo,mongoradio,public radio,webradio",
        "country": "Germany",
        "countrycode": "DE",
        "iso_3166_2": null,
        "state": "",
        "language": "german",
        "languagecodes": "de",
        "votes": 671830,
        "lastchangetime": "2023-11-04 17:05:55",
        "lastchangetime_iso8601": "2023-11-04T17:05:55Z",
        "codec": "MP3",
        "bitrate": 128,
        "hls": 0,
        "lastcheckok": 1,
        "lastchecktime": "2024-01-28 10:20:03",
        "lastchecktime_iso8601": "2024-01-28T10:20:03Z",
        "lastcheckoktime": "2024-01-28 10:20:03",
        "lastcheckoktime_iso8601": "2024-01-28T10:20:03Z",
        "lastlocalchecktime": "2024-01-28 02:48:27",
        "lastlocalchecktime_iso8601": "2024-01-28T02:48:27Z",
        "clicktimestamp": "2024-01-29 01:22:48",
        "clicktimestamp_iso8601": "2024-01-29T01:22:48Z",
        "clickcount": 1317,
        "clicktrend": 52,
        "ssl_error": 0,
        "geo_lat": null,
        "geo_long": null,
        "has_extended_info": false
      },
      {
        "changeuuid": "24e25823-bb95-470d-a2ab-6d0817560511",
        "stationuuid": "d28420a4-eccf-47a2-ace1-088c7e7cb7e0",
        "serveruuid": null,
        "name": "101 SMOOTH JAZZ",
        "url": "http://www.101smoothjazz.com/101-smoothjazz.m3u",
        "url_resolved": "http://jking.cdnstream1.com/b22139_128mp3",
        "homepage": "http://101smoothjazz.com/",
        "favicon": "http://101smoothjazz.com/favicon.ico",
        "tags": "easy listening,jazz,smooth jazz",
        "country": "The United States Of America",
        "countrycode": "US",
        "iso_3166_2": null,
        "state": "California",
        "language": "english",
        "languagecodes": "en",
        "votes": 45388,
        "lastchangetime": "2023-11-04 14:50:20",
        "lastchangetime_iso8601": "2023-11-04T14:50:20Z",
        "codec": "MP3",
        "bitrate": 128,
        "hls": 0,
        "lastcheckok": 1,
        "lastchecktime": "2024-01-29 01:31:51",
        "lastchecktime_iso8601": "2024-01-29T01:31:51Z",
        "lastcheckoktime": "2024-01-29 01:31:51",
        "lastcheckoktime_iso8601": "2024-01-29T01:31:51Z",
        "lastlocalchecktime": "2024-01-29 01:31:51",
        "lastlocalchecktime_iso8601": "2024-01-29T01:31:51Z",
        "clicktimestamp": "2024-01-29 01:33:06",
        "clicktimestamp_iso8601": "2024-01-29T01:33:06Z",
        "clickcount": 1214,
        "clicktrend": 23,
        "ssl_error": 0,
        "geo_lat": null,
        "geo_long": null,
        "has_extended_info": false
      },
      {
        "changeuuid": "09e8e98c-6a6d-4032-a3cc-96ed0352a505",
        "stationuuid": "1cfb151d-a341-11e9-a787-52543be04c81",
        "serveruuid": null,
        "name": "France Info",
        "url": "http://direct.franceinfo.fr/live/franceinfo-midfi.mp3",
        "url_resolved": "http://icecast.radiofrance.fr/franceinfo-midfi.mp3",
        "homepage": "https://www.francetvinfo.fr/",
        "favicon":
            "https://www.francetvinfo.fr/assets/common/images/pwa/ios/120-5487caf3.png",
        "tags": "",
        "country": "France",
        "countrycode": "FR",
        "iso_3166_2": null,
        "state": "",
        "language": "",
        "languagecodes": "",
        "votes": 44597,
        "lastchangetime": "2023-11-04 13:19:05",
        "lastchangetime_iso8601": "2023-11-04T13:19:05Z",
        "codec": "MP3",
        "bitrate": 128,
        "hls": 0,
        "lastcheckok": 1,
        "lastchecktime": "2024-01-28 15:10:26",
        "lastchecktime_iso8601": "2024-01-28T15:10:26Z",
        "lastcheckoktime": "2024-01-28 15:10:26",
        "lastcheckoktime_iso8601": "2024-01-28T15:10:26Z",
        "lastlocalchecktime": "2024-01-28 11:39:16",
        "lastlocalchecktime_iso8601": "2024-01-28T11:39:16Z",
        "clicktimestamp": "2024-01-29 01:31:33",
        "clicktimestamp_iso8601": "2024-01-29T01:31:33Z",
        "clickcount": 987,
        "clicktrend": 29,
        "ssl_error": 0,
        "geo_lat": null,
        "geo_long": null,
        "has_extended_info": false
      },
      {
        "changeuuid": "d7525ae9-3c27-4301-9a59-37647d764ab8",
        "stationuuid": "d2bbffaf-5d67-4a65-9772-097d8c0269d3",
        "serveruuid": null,
        "name": "France Inter",
        "url": "http://direct.franceinter.fr/live/franceinter-hifi.aac",
        "url_resolved": "http://icecast.radiofrance.fr/franceinter-hifi.aac",
        "homepage": "https://www.franceinter.fr/",
        "favicon":
            "https://canada-culture.org/wp-content/uploads/2018/05/logo-france-inter.png",
        "tags": "",
        "country": "France",
        "countrycode": "FR",
        "iso_3166_2": null,
        "state": "",
        "language": "french",
        "languagecodes": "fr",
        "votes": 36951,
        "lastchangetime": "2023-11-04 17:48:31",
        "lastchangetime_iso8601": "2023-11-04T17:48:31Z",
        "codec": "AAC",
        "bitrate": 256,
        "hls": 0,
        "lastcheckok": 1,
        "lastchecktime": "2024-01-28 16:35:21",
        "lastchecktime_iso8601": "2024-01-28T16:35:21Z",
        "lastcheckoktime": "2024-01-28 16:35:21",
        "lastcheckoktime_iso8601": "2024-01-28T16:35:21Z",
        "lastlocalchecktime": "2024-01-28 04:51:20",
        "lastlocalchecktime_iso8601": "2024-01-28T04:51:20Z",
        "clicktimestamp": "2024-01-29 01:36:06",
        "clicktimestamp_iso8601": "2024-01-29T01:36:06Z",
        "clickcount": 949,
        "clicktrend": 47,
        "ssl_error": 0,
        "geo_lat": null,
        "geo_long": null,
        "has_extended_info": false
      }
    ];
